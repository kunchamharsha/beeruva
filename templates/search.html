<html>

<head>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-cookies.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/danialfarid-angular-file-upload/12.2.13/ng-file-upload.min.js"></script>
  <script src="/js/contextMenu.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/angularjs-toaster/1.1.0/toaster.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.5.6/angular-sanitize.min.js"></script>
  <script src="https://code.angularjs.org/1.2.0/angular-animate.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angularjs-toaster/1.1.0/toaster.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  <script src="/js/module.js"></script>
  <script src="/js/search.js"></script>


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <title>Beeruva- Home</title>
  <style>
    .nopadding {
      padding: 0px;
    }

    .rightfloat {
      float: right;
    }

    .leftfloat {
      float: left;
    }

    .addedpadding {
      padding: 15px;
      background-color: #e9ecef;
    }
  </style>
  <link rel="stylesheet" href="/css/style.css">
</head>

<body ng-app="app" ng-controller="search">
  <!--nav class="navbar navbar-expand-sm bg-dark navbar-dark sticky-top">
                    <a class="navbar-brand" href="#">Open Drive</a>
                    <a style="float:right;" href="/api/logout">Logout</a>
            </nav-->
  <div class="wrapper">
    <nav id="sidebar">
      <div class="sidebar-header">
        <p style="font-size:24px;color:white;padding-left:25px;">Beeruva</p>
      </div>
      <div style="text-align: center; ">
        <!--label class="btn btn-primary" >
                            <input type="file" onchange="uploadChange()"  ngf-select ng-model="files" ngf-multiple="true" ngf-capture="'camera'"  ngf-keep="true" required>
                            Upload
                    </label-->
      </div>
      <ul class="list-unstyled components">
        <div>
          <li>
            <label class="btn btn-primary" style="transform: translateX(-50%); margin-left: 50%;">
                                        <input type="file" ng-change="uploadfile()"  ngf-select ng-model="files" ngf-multiple="true" ngf-capture="'camera'" required>
                                        Upload file
                                </label>
          </li>
        </div>
        <div>
          <li>
            <label class="btn btn-primary" ng-click="getfoldername()" style="transform: translateX(-50%); margin-left: 50%;">
                                        Create Folder
                                </label>
          </li>
        </div>
      </ul>
      <div ng-show="activategif" ng-cloak>
        <center>
          <p>Your documents are being uploaded,<br> please be patient</p>
        </center>
        <center><img src="/images/loading.gif"></center>
      </div>

      <!--ul class="list-unstyled components">
                        <li>
                            <a href="/dashboard">Applications</a>
                        </li>
                    </ul-->
      <ul class="list-unstyled components" style="margin-left: 5%;position: fixed; bottom: 0;">
        <li>
          <a class="logout" data-toggle="modal" data-target="#logoutModal">Logout</a>
        </li>
      </ul>

      <div class="modal" id="renamefile">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <p class="modal-title">Rename File</p>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <input type="text" ng-model="filetoberenamed" class="form-control">
            </div>
            <div class="modal-footer">
              <a class="btn btn-primary" data-dismiss="modal">No</a>
              <a class="btn btn-danger" data-dismiss="modal" ng-click="renamefile()">Yes</a>
            </div>
          </div>
        </div>
      </div>

      <div class="modal" id="getfoldername">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <p class="modal-title">Create Folder</p>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <input type="text" ng-model="foldername" class="form-control">
            </div>
            <div class="modal-footer">
              <a class="btn btn-primary" data-dismiss="modal">Cancel</a>
              <a class="btn btn-danger" data-dismiss="modal" ng-click="createfolder()">Create</a>
            </div>
          </div>
        </div>
      </div>

      <div class="modal" id="fileinfomodal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <p class="modal-title">File Information</p>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <table class="table table-striped">
                <tr ng-repeat="(key,value) in infofile">
                  <td>[{[key]}]</td>
                  <td>[{[value]}]</td>
                </tr>
              </table>
            </div>
            <div class="modal-footer">
              <a class="btn btn-primary" data-dismiss="modal">Close</a>
            </div>
          </div>
        </div>
      </div>


      <div class="modal" id="deletefileconfirmation">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <p class="modal-title">Confirm Delete</p>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <p>Are you sure you want to delete this file?</p>
            </div>
            <div class="modal-footer">
              <a class="btn btn-primary" data-dismiss="modal">No</a>
              <a class="btn btn-danger" data-dismiss="modal" ng-click="deletefile()">Yes</a>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="logoutModal" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <p class="modal-title">Confirm Logout</p>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <p>Are you sure, you want to logout ?</p>
            </div>
            <div class="modal-footer">
              <a class="btn btn-danger" data-dismiss="modal">No</a>
              <a href="/api/logout" class="btn btn-primary">Yes</a>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <div id="content" ng-cloak>

      <toaster-container toaster-options="{'time-out':1000}"></toaster-container>
      <div class="container">
        <div class="row">
          <div ng-repeat="files in listoffiles track by $index" class="card" style="width: 250px; margin:5px;height:165px;" context-menu="menuOptions" context-menu-empty-text="'SOME TEXT FOR EMPTY'">
            <div style="max-height:150px;">
              <img class="img-responsive card-img-top" ng-if='files.fileext!="jpg" && files.fileext!="png" && files.fileext!="jpeg"' style="height:120px;object-fit:contain;" onerror="this.src='/images/default.png'" ng-src="/images/[{[files.filetype == 'd' ? 'd' : files.fileext]}].png"
                alt="Card image cap" ng-cloak>
              <img class="img-responsive card-img-top" ng-if='files.fileext=="jpg" || files.fileext=="png" || files.fileext=="jpeg"' style="height:120px;object-fit:contain;" ng-src="/cdn/[{[files.fileid]}]" alt="Card image cap" ng-cloak>
            </div>
            <div class="card-footer" style="max-height:45px;">
              <div class="media">

                <div class="media-body">
                  <div style="white-space:nowrap;text-overflow:ellipsis;width:175px;overflow: hidden;display:inline-block;">
                    <span>[{[files.filename]}]</span>
                  </div>
                </div>

                <div class="media-right" ng-if='files.filetype == "f"'>
                  <a href="/cdn/[{[files.filename]}]" download>
                                                    <i class="fas fa-download">
                                                    </i>
                                                </a>
                </div>
              </div>


            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  </div>

</html>
</body>
